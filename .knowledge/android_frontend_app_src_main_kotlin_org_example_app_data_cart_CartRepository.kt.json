{"is_source_file": true, "format": "Kotlin", "description": "Kotlin singleton object serving as an in-memory repository for shopping cart data in an Android application. Manages cart items, quantities, and calculations for subtotal, delivery fee, tax, and total. Uses LiveData to observe changes in cart state.", "external_files": ["androidx.lifecycle.LiveData", "androidx.lifecycle.MutableLiveData", "org.example.app.data.models.CartLine", "org.example.app.data.models.MenuItem"], "external_methods": [], "published": ["cartLines", "totalItemCount", "add", "remove", "updateQuantity", "getQuantity", "computeSubtotalCents", "computeDeliveryFeeCents", "computeTaxCents", "computeTotalCents"], "classes": [{"name": "CartRepository", "description": "Singleton object managing the in-memory shopping cart state, providing methods to modify cart items, compute totals, and expose LiveData for observing changes."}], "methods": [{"name": "add", "description": "Adds one quantity of a specified MenuItem to the cart, updating the cart state."}, {"name": "remove", "description": "Removes a specified MenuItem from the cart entirely."}, {"name": "updateQuantity", "description": "Sets the quantity for a given MenuItem; removes if quantity is zero or less."}, {"name": "getQuantity", "description": "Returns the current quantity of an item in the cart by item ID."}, {"name": "computeSubtotalCents", "description": "Calculates the total price in cents for all items in the cart before additional fees."}, {"name": "computeDeliveryFeeCents", "description": "Provides a flat delivery fee in cents; zero if the cart is empty."}, {"name": "computeTaxCents", "description": "Calculates tax in cents based on subtotal and tax rate."}, {"name": "computeTotalCents", "description": "Calculates the overall total in cents, including subtotal, delivery, and tax."}, {"name": "publish", "description": "Updates LiveData objects with current cart state and item count."}], "calls": ["linesByItemId.values.sumOf { it.item.priceCents * it.quantity }", "linesByItemId.values.toList()", "list.sumOf { it.quantity }", "max(0, quantity)", "linesByItemId.remove(item.id)", "linesByItemId[item.id] = CartLine(item, q)"], "search-terms": ["CartRepository", "LiveData", "cart state", "cart item management", "calculate totals", "in-memory cart"], "state": 2, "file_id": 14, "knowledge_revision": 49, "git_revision": "", "hash": "f3d34b7c21bb4eaa10584df0d7d51fba", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/data/cart/CartRepository.kt", "revision_history": [{"49": ""}]}