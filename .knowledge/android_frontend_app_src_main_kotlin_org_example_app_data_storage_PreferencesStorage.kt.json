{"is_source_file": true, "format": "Kotlin", "description": "This file defines the PreferencesStorage class which provides an interface for reading and writing lightweight local state data using Android's SharedPreferences. It handles storing user preferences, cart contents, favorites, and other application state data, with encoding/decoding handled via the SafeCodec utility.", "external_files": ["org.example.app.data.storage.models.StoredCartLine", "org.example.app.data.cart.AppliedPromo", "org.example.app.data.cart.FeeSettings", "SafeCodec"], "external_methods": ["SafeCodec.decodeStringSet", "SafeCodec.encodeStringSet", "SafeCodec.decodeCartLines", "SafeCodec.encodeCartLines", "SafeCodec.decodeAppliedPromo", "SafeCodec.encodeAppliedPromo", "SafeCodec.decodeFeeSettings", "SafeCodec.encodeFeeSettings"], "published": ["PreferencesStorage"], "classes": [{"name": "PreferencesStorage", "description": "A singleton class providing methods to persist and retrieve various user preferences and app state data via Android's SharedPreferences, including favorites, cart items, promos, and settings."}], "methods": [{"name": "from", "description": "Factory method to instantiate PreferencesStorage with app's SharedPreferences."}, {"name": "loadFavoriteRestaurantIds", "description": "Loads the set of favorited restaurant IDs from preferences."}, {"name": "saveFavoriteRestaurantIds", "description": "Saves the set of favorited restaurant IDs to preferences."}, {"name": "loadFavoriteMenuItemIds", "description": "Loads the set of favorited menu item IDs."}, {"name": "saveFavoriteMenuItemIds", "description": "Saves the set of favorited menu item IDs."}, {"name": "loadCartLines", "description": "Loads the list of cart lines."}, {"name": "saveCartLines", "description": "Saves the list of cart lines."}, {"name": "loadCartPromo", "description": "Loads the persisted cart promotion data."}, {"name": "saveCartPromo", "description": "Saves the cart promotion data."}, {"name": "loadCartFeeSettings", "description": "Loads the cart fee settings."}, {"name": "saveCartFeeSettings", "description": "Saves the cart fee settings."}, {"name": "loadPreferenceString", "description": "Loads a generic string preference by key."}, {"name": "savePreferenceString", "description": "Saves a generic string preference by key."}, {"name": "loadCartOrderInstructions", "description": "Loads special order instructions for the cart."}, {"name": "saveCartOrderInstructions", "description": "Saves special order instructions for the cart."}, {"name": "loadActiveDeliveryOrderEncoded", "description": "Loads the encoded active delivery order state."}, {"name": "saveActiveDeliveryOrderEncoded", "description": "Saves the encoded active delivery order state."}, {"name": "loadRatingsReviewsEncoded", "description": "Loads the encoded ratings/reviews blob."}, {"name": "saveRatingsReviewsEncoded", "description": "Saves the encoded ratings/reviews blob."}, {"name": "loadRatingsAggregatesEncoded", "description": "Loads the encoded ratings aggregates blob."}, {"name": "saveRatingsAggregatesEncoded", "description": "Saves the encoded ratings aggregates blob."}], "calls": ["prefs.getString", "prefs.edit().apply", "apply", "remove", "putString"], "search-terms": ["PreferencesStorage", "SharedPreferences", "cart lines", "favorite restaurant IDs", "cart promo", "encodings", "local preferences", "cart instructions", "ratings blobs"], "state": 2, "file_id": 35, "knowledge_revision": 250, "git_revision": "5e15db62566d0828eda2f083edf5df8b791c1e55", "revision_history": [{"81": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"115": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"165": "50c7aa46afe96fafa36f6da7e89f8349bbf6dc59"}, {"201": "6e91d21a038bee6a12947e6117ed8dfb31963ce7"}, {"250": "5e15db62566d0828eda2f083edf5df8b791c1e55"}], "hash": "c8d7ace7a04bc6234817ce3b73e4415c", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/data/storage/PreferencesStorage.kt"}