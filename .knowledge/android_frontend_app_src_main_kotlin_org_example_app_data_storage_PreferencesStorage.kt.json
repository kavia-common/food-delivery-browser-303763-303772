{"is_source_file": true, "format": "Kotlin", "description": "This file defines a PreferencesStorage class that provides persistent local state management for a food delivery app using Android's SharedPreferences. It handles storing and retrieving user preferences, favorites, cart contents, promo settings, and fee configurations.", "external_files": ["android.content.Context", "android.content.SharedPreferences", "org.example.app.data.storage.models.StoredCartLine", "org.example.app.data.cart.AppliedPromo", "org.example.app.data.cart.FeeSettings", "SafeCodec"], "external_methods": ["prefs.getString()", "prefs.edit()", "apply()", "remove()", "putString()", "decodeStringSet()", "encodeStringSet()", "decodeCartLines()", "encodeCartLines()", "decodeAppliedPromo()", "encodeAppliedPromo()", "decodeFeeSettings()", "encodeFeeSettings()", "getSharedPreferences()"], "published": ["PreferencesStorage"], "classes": [{"name": "PreferencesStorage", "description": "A singleton class providing an interface to store and retrieve lightweight local data such as favorites, cart lines, promo settings, and preferences using SharedPreferences."}], "methods": [{"name": "loadFavoriteRestaurantIds", "description": "Loads the set of favorited restaurant IDs from SharedPreferences, returning an empty set if missing or malformed."}, {"name": "saveFavoriteRestaurantIds", "description": "Saves the set of favorited restaurant IDs to SharedPreferences."}, {"name": "loadFavoriteMenuItemIds", "description": "Loads the set of favorited menu item IDs from SharedPreferences."}, {"name": "saveFavoriteMenuItemIds", "description": "Saves the set of favorited menu item IDs to SharedPreferences."}, {"name": "loadCartLines", "description": "Loads the list of cart lines from SharedPreferences, returning an empty list if missing or malformed."}, {"name": "saveCartLines", "description": "Saves the list of cart lines to SharedPreferences."}, {"name": "loadCartPromo", "description": "Loads the persisted cart promotional data, returning null if missing or malformed."}, {"name": "saveCartPromo", "description": "Saves the cart promotional data; null removes the preference."}, {"name": "loadCartFeeSettings", "description": "Loads persisted cart fee settings, returning null if missing or malformed."}, {"name": "saveCartFeeSettings", "description": "Saves or removes cart fee settings."}, {"name": "loadPreferenceString", "description": "Retrieves a custom preference string associated with a key."}, {"name": "savePreferenceString", "description": "Stores a custom preference string associated with a key."}, {"name": "from", "description": "Factory method to instantiate PreferencesStorage with application context."}], "calls": ["prefs.getString", "prefs.edit", "apply", "remove", "putString", "SafeCodec.decodeStringSet", "SafeCodec.encodeStringSet", "SafeCodec.decodeCartLines", "SafeCodec.encodeCartLines", "SafeCodec.decodeAppliedPromo", "SafeCodec.encodeAppliedPromo", "SafeCodec.decodeFeeSettings", "SafeCodec.encodeFeeSettings"], "search-terms": ["PreferencesStorage Kotlin", "SharedPreferences-based local storage", "favorites_restaurants", "cart_lines", "cart_promo", "cart_fee_settings", "FoodDeliveryPreferences", "app preferences storage"], "state": 2, "file_id": 35, "knowledge_revision": 115, "git_revision": "ac812a530cde5aab51ee830d20669449da61e0a3", "revision_history": [{"81": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"115": "ac812a530cde5aab51ee830d20669449da61e0a3"}], "hash": "575a67c679d795cf1bdcdc1859136802", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/data/storage/PreferencesStorage.kt"}