{"is_source_file": true, "format": "Kotlin", "description": "This file defines a PreferencesStorage class that handles persistence of lightweight app state using Android's SharedPreferences. It manages data such as favorite restaurants, menu items, cart lines, promo settings, fee settings, and delivery order state, providing load and save methods for each type.", "external_files": ["android.content.Context", "android.content.SharedPreferences", "org.example.app.data.storage.models.StoredCartLine", "org.example.app.data.cart.AppliedPromo", "org.example.app.data.cart.FeeSettings"], "external_methods": ["prefs.edit()", "SafeCodec.decodeStringSet", "SafeCodec.encodeStringSet", "SafeCodec.decodeCartLines", "SafeCodec.encodeCartLines", "SafeCodec.decodeAppliedPromo", "SafeCodec.encodeAppliedPromo", "SafeCodec.decodeFeeSettings", "SafeCodec.encodeFeeSettings"], "published": ["PreferencesStorage"], "classes": [{"name": "PreferencesStorage", "description": "A singleton class providing storage and retrieval of lightweight app preferences and state information using SharedPreferences."}], "methods": [{"name": "loadFavoriteRestaurantIds", "description": "Retrieves the set of favorite restaurant IDs from SharedPreferences, decoding stored string data."}, {"name": "saveFavoriteRestaurantIds", "description": "Saves the set of favorite restaurant IDs into SharedPreferences, encoding the data as a string."}, {"name": "loadFavoriteMenuItemIds", "description": "Retrieves the set of favorite menu item IDs from storage."}, {"name": "saveFavoriteMenuItemIds", "description": "Stores the set of favorite menu item IDs."}, {"name": "loadCartLines", "description": "Loads the list of cart lines, decoding from stored string data."}, {"name": "saveCartLines", "description": "Saves the list of cart lines into storage."}, {"name": "loadCartPromo", "description": "Retrieves the persisted cart promotional settings."}, {"name": "saveCartPromo", "description": "Persists the cart promotional settings."}, {"name": "loadCartFeeSettings", "description": "Retrieves the fee settings for the cart."}, {"name": "saveCartFeeSettings", "description": "Stores the cart fee settings."}, {"name": "loadPreferenceString", "description": "Retrieves a stub preference string by key."}, {"name": "savePreferenceString", "description": "Stores a stub preference string by key."}, {"name": "loadActiveDeliveryOrderEncoded", "description": "Loads an opaque encoded string representing the active delivery order state."}, {"name": "saveActiveDeliveryOrderEncoded", "description": "Stores or removes the active delivery order state encoded as a string."}], "calls": ["prefs.edit()", "SafeCodec.decodeStringSet", "SafeCodec.encodeStringSet", "SafeCodec.decodeCartLines", "SafeCodec.encodeCartLines", "SafeCodec.decodeAppliedPromo", "SafeCodec.encodeAppliedPromo", "SafeCodec.decodeFeeSettings", "SafeCodec.encodeFeeSettings"], "search-terms": ["SharedPreferences", "PreferencesStorage", "favorite restaurant IDs", "cart lines", "promo settings", "fee settings", "delivery order", "Preferences"], "state": 2, "file_id": 35, "knowledge_revision": 165, "git_revision": "50c7aa46afe96fafa36f6da7e89f8349bbf6dc59", "revision_history": [{"81": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"115": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"165": "50c7aa46afe96fafa36f6da7e89f8349bbf6dc59"}], "hash": "4e6afd3e74e3a8a8334c193a6c19e9c3", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/data/storage/PreferencesStorage.kt"}