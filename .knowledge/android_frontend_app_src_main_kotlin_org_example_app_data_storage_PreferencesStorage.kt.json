{"is_source_file": true, "format": "Kotlin", "description": "Defines the PreferencesStorage class, which provides persistent local storage for lightweight app state using SharedPreferences, including favorites, cart lines, promo settings, and preferences in a food delivery app.", "external_files": ["android.content.Context", "android.content.SharedPreferences", "org.example.app.data.storage.models.StoredCartLine", "org.example.app.data.cart.AppliedPromo", "org.example.app.data.cart.FeeSettings", "org.example.app.data.storage.models.StoredCartLine", "SafeCodec"], "external_methods": ["prefs.edit()", "apply()", "getString()", "remove()", "putString()", "decodeStringSet()", "encodeStringSet()", "decodeCartLines()", "encodeCartLines()", "decodeAppliedPromo()", "encodeAppliedPromo()", "decodeFeeSettings()", "encodeFeeSettings()"], "published": ["from"], "classes": [{"name": "PreferencesStorage", "description": "A class providing lightweight persistent storage for app-specific data such as favorites, cart state, and preferences using SharedPreferences."}], "methods": [{"name": "loadFavoriteRestaurantIds", "description": "Loads favorited restaurant IDs, returning a set of strings, defaults to empty if missing or malformed."}, {"name": "saveFavoriteRestaurantIds", "description": "Saves favorited restaurant IDs to persistent storage."}, {"name": "loadFavoriteMenuItemIds", "description": "Loads favorited menu item IDs, returning a set of strings, defaults to empty if missing or malformed."}, {"name": "saveFavoriteMenuItemIds", "description": "Saves favorited menu item IDs."}, {"name": "loadCartLines", "description": "Loads the cart lines as a list of StoredCartLine objects, defaults to empty if missing or malformed."}, {"name": "saveCartLines", "description": "Persists the list of cart lines."}, {"name": "loadCartPromo", "description": "Loads the applied promo settings for the cart, returns null if missing or malformed."}, {"name": "saveCartPromo", "description": "Persists the cart's promo settings."}, {"name": "loadCartFeeSettings", "description": "Loads cart fee settings, returns null if missing or malformed."}, {"name": "saveCartFeeSettings", "description": "Persists cart fee settings."}, {"name": "loadPreferenceString", "description": "Stub method to load a generic preference string by key."}, {"name": "savePreferenceString", "description": "Stub method to save a generic preference string by key."}, {"name": "loadCartOrderInstructions", "description": "Loads per-order special instructions, returns null if not set."}, {"name": "saveCartOrderInstructions", "description": "Saves per-order special instructions."}, {"name": "loadActiveDeliveryOrderEncoded", "description": "Loads the encoded active delivery order state."}, {"name": "saveActiveDeliveryOrderEncoded", "description": "Persists the encoded active delivery order state."}], "calls": ["prefs.edit()", "apply()", "getString()", "remove()", "putString()", "SafeCodec.decodeStringSet()", "SafeCodec.encodeStringSet()", "SafeCodec.decodeCartLines()", "SafeCodec.encodeCartLines()", "SafeCodec.decodeAppliedPromo()", "SafeCodec.encodeAppliedPromo()", "SafeCodec.decodeFeeSettings()", "SafeCodec.encodeFeeSettings()"], "search-terms": ["PreferencesStorage", "SharedPreferences", "saveFavoriteRestaurantIds", "loadFavoriteMenuItemIds", "saveCartLines", "loadCartPromo", "saveCartPromo", "loadCartFeeSettings", "saveCartFeeSettings", "loadCartOrderInstructions"], "state": 2, "file_id": 35, "knowledge_revision": 201, "git_revision": "6e91d21a038bee6a12947e6117ed8dfb31963ce7", "revision_history": [{"81": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"115": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"165": "50c7aa46afe96fafa36f6da7e89f8349bbf6dc59"}, {"201": "6e91d21a038bee6a12947e6117ed8dfb31963ce7"}], "hash": "ed0fd6dfc25a08ffbf83c17c38944698", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/data/storage/PreferencesStorage.kt"}