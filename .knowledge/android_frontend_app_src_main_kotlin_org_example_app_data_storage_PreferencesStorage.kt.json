{"is_source_file": true, "format": "Kotlin", "description": "This file defines a PreferencesStorage class that manages lightweight local state persistence using Android's SharedPreferences. It handles saving and loading of favorite restaurant IDs, favorite menu item IDs, cart lines, and generic preferences via key-value pairs, with simple encoding/decoding logic.", "external_files": ["android.content.Context", "android.content.SharedPreferences", "org.example.app.data.storage.models.StoredCartLine"], "external_methods": ["prefs.edit()", "prefs.getString()", "SharedPreferences.Editor.apply()", "SharedPreferences.Editor.remove()", "SharedPreferences.Editor.putString()", "context.applicationContext.getSharedPreferences()", "SafeCodec.decodeStringSet()", "SafeCodec.encodeStringSet()", "SafeCodec.decodeCartLines()", "SafeCodec.encodeCartLines()"], "published": ["PreferencesStorage"], "classes": [{"name": "PreferencesStorage", "description": "A class providing persistent storage for user preferences, favorites, and cart data using SharedPreferences."}], "methods": [{"name": "loadFavoriteRestaurantIds", "description": "Loads the set of favorited restaurant IDs from SharedPreferences."}, {"name": "saveFavoriteRestaurantIds", "description": "Saves the set of favorited restaurant IDs to SharedPreferences."}, {"name": "loadFavoriteMenuItemIds", "description": "Loads the set of favorited menu item IDs."}, {"name": "saveFavoriteMenuItemIds", "description": "Persists the set of favorited menu item IDs."}, {"name": "loadCartLines", "description": "Loads cart lines from local storage as a list of StoredCartLine objects."}, {"name": "saveCartLines", "description": "Saves the list of cart lines to local storage."}, {"name": "loadPreferenceString", "description": "Retrieves a preference value for a given key."}, {"name": "savePreferenceString", "description": "Saves a preference string for a given key."}, {"name": "from", "description": "Factory method to create a PreferencesStorage instance using application context."}], "calls": ["prefs.edit()", "prefs.getString()", "SharedPreferences.Editor.apply()", "SharedPreferences.Editor.remove()", "SharedPreferences.Editor.putString()", "context.applicationContext.getSharedPreferences()", "SafeCodec.decodeStringSet()", "SafeCodec.encodeStringSet()", "SafeCodec.decodeCartLines()", "SafeCodec.encodeCartLines()"], "search-terms": ["PreferencesStorage", "SharedPreferences", "FavoriteRestaurantIds", "FavoriteMenuItemIds", "CartLines", "SafeCodec", "Preferences"], "state": 2, "file_id": 35, "knowledge_revision": 81, "git_revision": "ac812a530cde5aab51ee830d20669449da61e0a3", "hash": "58c7ba1fcbe275595fe151c767270b0c", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/data/storage/PreferencesStorage.kt", "revision_history": [{"81": "ac812a530cde5aab51ee830d20669449da61e0a3"}]}