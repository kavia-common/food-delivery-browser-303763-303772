{"is_source_file": true, "format": "Kotlin", "description": "This file defines the HomeFragment class for an Android application, implementing a fragment that displays a list of restaurants with search, filtering, sorting, and favorites functionality. It manages UI components, user interactions, and integrates with repositories and view models to present and filter restaurant data.", "external_files": ["R (resource identifiers)", "com.google.android.material.*", "org.example.app.MainActivity", "org.example.app.data.delivery.DeliveryRepository", "org.example.app.data.favorites.FavoritesRepository", "org.example.app.data.mock.MockData", "org.example.app.data.models.Restaurant", "org.example.app.data.preferences.AppPreferencesRepository", "org.example.app.ui.shared.SharedAppViewModel", "androidx.fragment.app.Fragment", "androidx.lifecycle.ViewModelProvider", "androidx.recyclerview.widget.LinearLayoutManager", "androidx.recyclerview.widget.RecyclerView", "android.view.*", "android.widget.*", "kotlin.math.roundToInt"], "external_methods": ["FavoritesRepository.isRestaurantFavorited", "FavoritesRepository.toggleRestaurantFavorite", "AppPreferencesRepository.setHomeFavoritesOnly", "AppPreferencesRepository.setHomeSearchQuery", "AppPreferencesRepository.setHomeVegOnly", "AppPreferencesRepository.setHomeSelectedCuisines", "AppPreferencesRepository.setHomeSortOption", "AppPreferencesRepository.setThemeMode", "AppPreferencesRepository.getHomeSortOption", "AppPreferencesRepository.getThemeMode", "DeliveryRepository.initialize", "DeliveryRepository.activeOrder.observe", "DeliveryRepository.etaRemainingMs.observe", "getString"], "published": ["HomeFragment"], "classes": [{"name": "HomeFragment", "description": "An Android Fragment subclass managing the home screen UI, including restaurant list, search, filters, sorting, and delivery ETA badge, interfacing with repositories and view models to display filtered data."}], "methods": [{"name": "onAttach", "description": "Initializes the restaurant adapter with click and favorite toggle callbacks."}, {"name": "onCreate", "description": "Sets up the ViewModel for shared application state."}, {"name": "onCreateOptionsMenu", "description": "Inflates the options menu for theme switching."}, {"name": "onOptionsItemSelected", "description": "Handles menu item selection, such as opening the theme dialog."}, {"name": "onCreateView", "description": "Inflates the fragment layout."}, {"name": "onViewCreated", "description": "Initializes UI components, sets up filters, search, sort, observes LiveData, and manages delivery ETA badge updates."}, {"name": "setupSearch", "description": "Sets up search input listener to update search query in preferences."}, {"name": "setupFilterChips", "description": "Creates and configures filter chips for 'Veg Only' and cuisine tags."}, {"name": "setupSort", "description": "Sets up sorting button to trigger sort options dialog."}, {"name": "showSortDialog", "description": "Displays a dialog for selecting the restaurant list sort order."}, {"name": "showThemeDialog", "description": "Displays a dialog for selecting theme mode."}, {"name": "getSortLabel", "description": "Returns display label for given sort option."}, {"name": "restoreUiFromPreferences", "description": "Restores UI filters and search input from shared preferences and view model states."}, {"name": "applySearchAndFilters", "description": "Filters restaurant list based on search query, veg-only toggle, and selected cuisines."}, {"name": "applySort", "description": "Sorts list of restaurants based on selected criteria like rating, price, ETA, or popularity."}], "calls": ["FavoritesRepository.isRestaurantFavorited", "FavoritesRepository.toggleRestaurantFavorite", "AppPreferencesRepository.setHomeFavoritesOnly", "AppPreferencesRepository.setHomeSearchQuery", "AppPreferencesRepository.setHomeVegOnly", "AppPreferencesRepository.setHomeSelectedCuisines", "AppPreferencesRepository.setHomeSortOption", "AppPreferencesRepository.setThemeMode", "DeliveryRepository.initialize", "DeliveryRepository.activeOrder.observe", "DeliveryRepository.etaRemainingMs.observe", "getString", "showSortDialog", "showThemeDialog"], "search-terms": ["HomeFragment Kotlin", "restaurant list filter", "Favorites toggle", "search bar", "sorting", "cuisine chips", "vegetarian filter", "delivery ETA badge", "shared view model", "preferences"], "state": 2, "file_id": 17, "knowledge_revision": 181, "git_revision": "234954649911681eb37326c98e5a3c4636728440", "revision_history": [{"52": ""}, {"93": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"111": "ec68bc5172b79f3c72327ea0ad8090ce19371643"}, {"127": "ec68bc5172b79f3c72327ea0ad8090ce19371643"}, {"142": "234954649911681eb37326c98e5a3c4636728440"}, {"181": "234954649911681eb37326c98e5a3c4636728440"}], "hash": "282cac835d7575c599f6f293fd5b7281", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/ui/home/HomeFragment.kt"}