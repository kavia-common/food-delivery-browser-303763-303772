{"is_source_file": true, "format": "Kotlin", "description": "This file defines the HomeFragment class, which manages the main home screen UI for a food delivery app, including restaurant list, filters, sorting, recommendations, and delivery status badge.", "external_files": ["R (resources)", "org.example.app.data.delivery.DeliveryRepository", "org.example.app.data.favorites.FavoritesRepository", "org.example.app.data.mock.MockData", "org.example.app.data.models.Restaurant", "org.example.app.data.preferences.AppPreferencesRepository", "org.example.app.ui.common.MotionUtils", "org.example.app.ui.shared.SharedAppViewModel", "org.example.app.MainActivity", "com.google.android.material.*", "androidx.fragment.app.Fragment", "androidx.lifecycle.ViewModelProvider", "androidx.recyclerview.widget.RecyclerView", "android.view.*", "android.widget.*"], "external_methods": ["FavoritesRepository.isRestaurantFavorited", "FavoritesRepository.toggleRestaurantFavorite", "AppPreferencesRepository.setHomeFavoritesOnly", "AppPreferencesRepository.setHomeVegOnly", "AppPreferencesRepository.setHomeSelectedCuisines", "AppPreferencesRepository.setHomeSortOption", "AppPreferencesRepository.setThemeMode", "sharedAppViewModel.homeSearchQuery.value", "sharedAppViewModel.homeVegOnly.value", "sharedAppViewModel.homeSelectedCuisines.value", "sharedAppViewModel.homeSortOption.value", "sharedAppViewModel.favoriteRestaurantIds.value", "sharedAppViewModel.homeFavoritesOnly.value", "sharedAppViewModel.recommendedRestaurants.observe", "DeliveryRepository.initialize", "DeliveryRepository.activeOrder.observe", "DeliveryRepository.etaRemainingMs.observe"], "published": ["HomeFragment.TAG"], "classes": [{"name": "HomeFragment", "description": "Main fragment class handling restaurant listing, filters, sorting, recommendations, and delivery status UI in the home screen."}], "methods": [{"name": "onAttach", "description": "Initializes adapters with click and favorite toggle handlers."}, {"name": "onCreate", "description": "Sets up the view model and menu options."}, {"name": "onCreateOptionsMenu", "description": "Inflates the overflow menu with theme switch."}, {"name": "onOptionsItemSelected", "description": "Handles menu item selection, e.g., theme dialog."}, {"name": "onCreateView", "description": "Inflates the fragment layout."}, {"name": "onViewCreated", "description": "Initializes UI components, sets up filters, search, sorting, observes view model LiveData for reactivity, and manages delivery badge updates."}, {"name": "setupSearch", "description": "Creates text watcher for search input, updates preferences."}, {"name": "setupFilterChips", "description": "Dynamically populates and configures filter chips for cuisine and veg-only filters."}, {"name": "setupSort", "description": "Sets click listener for sorting button to show dialog."}, {"name": "showSortDialog", "description": "Displays sorting options for user to select."}, {"name": "showThemeDialog", "description": "Displays theme options to user."}, {"name": "getSortLabel", "description": "Returns user-friendly label for each sort option."}, {"name": "restoreUiFromPreferences", "description": "Restores UI state from stored preferences for search and filter chips."}, {"name": "applySearchAndFilters", "description": "Filters a list of restaurants based on search query, veg-only, and selected cuisines."}, {"name": "applySort", "description": "Sorts restaurant list based on selected sort criteria, factoring in favorites and ratings."}], "calls": ["FavoritesRepository.isRestaurantFavorited", "FavoritesRepository.toggleRestaurantFavorite", "AppPreferencesRepository.setHomeFavoritesOnly", "AppPreferencesRepository.setHomeVegOnly", "AppPreferencesRepository.setHomeSelectedCuisines", "AppPreferencesRepository.setHomeSortOption", "AppPreferencesRepository.setThemeMode", "sharedAppViewModel.homeSearchQuery.value", "sharedAppViewModel.homeVegOnly.value", "sharedAppViewModel.homeSelectedCuisines.value", "sharedAppViewModel.homeSortOption.value", "sharedAppViewModel.favoriteRestaurantIds.value", "sharedAppViewModel.homeFavoritesOnly.value", "sharedAppViewModel.recommendedRestaurants.observe", "DeliveryRepository.initialize", "DeliveryRepository.activeOrder.observe", "DeliveryRepository.etaRemainingMs.observe", "getString", "notifyDataSetChanged", "setOnCheckedChangeListener", "setOnClickListener", "setSingleChoiceItems", "setText", "setOnCheckedChangeListener", "setChecked"], "search-terms": ["HomeFragment", "restaurant list", "filters", "sorting", "recommendations", "delivery badge", "favorites", "cuisine tags", "veg-only", "search input", "sort dialog", "theme settings"], "state": 2, "file_id": 17, "knowledge_revision": 326, "git_revision": "620d86ba7c4053780cb4968df45ff0b595171047", "revision_history": [{"52": ""}, {"93": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"111": "ec68bc5172b79f3c72327ea0ad8090ce19371643"}, {"127": "ec68bc5172b79f3c72327ea0ad8090ce19371643"}, {"142": "234954649911681eb37326c98e5a3c4636728440"}, {"181": "234954649911681eb37326c98e5a3c4636728440"}, {"229": "6e91d21a038bee6a12947e6117ed8dfb31963ce7"}, {"326": "620d86ba7c4053780cb4968df45ff0b595171047"}], "hash": "4090b8db3bfa9d96ba5c10bf858799b1", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/ui/home/HomeFragment.kt"}