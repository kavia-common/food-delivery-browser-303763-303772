{"is_source_file": true, "format": "Kotlin", "description": "This file defines the 'HomeFragment' class, which is a UI component in an Android application. It manages the display and interaction of a list of restaurants, including filtering, searching, sorting, favorites management, and delivery status badges. The class interacts with repositories, view models, and user interface components to provide a dynamic restaurant browsing experience.", "external_files": ["R (resources for layouts and strings)", "org.example.app.MainActivity", "org.example.app.data.delivery.DeliveryRepository", "org.example.app.data.favorites.FavoritesRepository", "org.example.app.data.mock.MockData", "org.example.app.data.models.Restaurant", "org.example.app.data.preferences.AppPreferencesRepository", "org.example.app.ui.common.MotionUtils", "org.example.app.ui.shared.SharedAppViewModel", "com.google.android.material.* (buttons, chips, switch, text input)", "androidx.fragment.app.Fragment", "androidx.lifecycle.ViewModelProvider", "androidx.recyclerview.widget.RecyclerView", "android.os.Bundle", "android.view.*", "android.widget.*"], "external_methods": ["FavoritesRepository.isRestaurantFavorited", "FavoritesRepository.toggleRestaurantFavorite", "AppPreferencesRepository.setHomeFavoritesOnly", "AppPreferencesRepository.setHomeSearchQuery", "AppPreferencesRepository.setHomeVegOnly", "AppPreferencesRepository.setHomeSelectedCuisines", "AppPreferencesRepository.setHomeSortOption", "AppPreferencesRepository.setThemeMode", "DeliveryRepository.initialize", "DeliveryRepository.activeOrder.observe", "DeliveryRepository.etaRemainingMs.observe", "MotionUtils.createSubtleItemAnimator", "getString", "showThemeDialog", "showSortDialog"], "published": ["HomeFragment.TAG"], "classes": [{"name": "HomeFragment", "description": "Android Fragment that displays a list of restaurants with filtering, searching, sorting, and favorite toggling features. Manages UI components and interacts with preferences, repositories, and view models."}], "methods": [{"name": "onAttach", "description": "Initializes the adapter with event handlers for restaurant click, favorite status, and toggling."}, {"name": "onCreate", "description": "Sets up ViewModelProvider and registers menu options."}, {"name": "onCreateOptionsMenu", "description": "Inflates the options menu for theme switching."}, {"name": "onOptionsItemSelected", "description": "Handles menu item selection, e.g., opening theme dialog."}, {"name": "onCreateView", "description": "Inflates the fragment layout from XML."}, {"name": "onViewCreated", "description": "Initializes UI components, observers, and sets up event handlers for filtering, searching, sorting, and delivery badge updates. Calls restoreUiFromPreferences and initial render."}, {"name": "setupSearch", "description": "Configures search input to update preferences on text change."}, {"name": "setupFilterChips", "description": "Creates chips for 'veg only' and cuisine filters, with event handlers to update preferences."}, {"name": "setupSort", "description": "Sets up click listener to show sorting options dialog."}, {"name": "showSortDialog", "description": "Displays dialog to select sorting criterion."}, {"name": "showThemeDialog", "description": "Displays dialog for theme mode selection."}, {"name": "getSortLabel", "description": "Converts sort option enum to display string."}, {"name": "restoreUiFromPreferences", "description": "Restores UI state (search text, chip selections, sort label) from shared ViewModel state and preferences."}, {"name": "applySearchAndFilters", "description": "Filters the list of restaurants based on search query, veg-only filter, and selected cuisines."}, {"name": "applySort", "description": "Sorts restaurants based on selected sorting option, considering popularity and other heuristics."}], "calls": ["FavoritesRepository.isRestaurantFavorited", "FavoritesRepository.toggleRestaurantFavorite", "AppPreferencesRepository.setHomeFavoritesOnly", "AppPreferencesRepository.setHomeSearchQuery", "AppPreferencesRepository.setHomeVegOnly", "AppPreferencesRepository.setHomeSelectedCuisines", "AppPreferencesRepository.setHomeSortOption", "AppPreferencesRepository.setThemeMode", "DeliveryRepository.initialize", "DeliveryRepository.activeOrder.observe", "DeliveryRepository.etaRemainingMs.observe", "MotionUtils.createSubtleItemAnimator", "getString", "showThemeDialog", "showSortDialog", "adapter.submitList", "adapter.notifyDataSetChanged", "sharedAppViewModel.homeSearchQuery.value", "sharedAppViewModel.favoriteRestaurantIds.value", "sharedAppViewModel.homeFavoritesOnly.value", "sharedAppViewModel.homeVegOnly.value", "sharedAppViewModel.homeSelectedCuisines.value", "sharedAppViewModel.homeSortOption.value", "sharedAppViewModel.favoriteRestaurantIds.observe", "sharedAppViewModel.homeFavoritesOnly.observe", "sharedAppViewModel.homeSearchQuery.observe", "sharedAppViewModel.homeVegOnly.observe", "sharedAppViewModel.homeSelectedCuisines.observe", "sharedAppViewModel.homeSortOption.observe"], "search-terms": ["HomeFragment", "restaurant list", "filters", "sorting", "favorites", "delivery badge", "preferences", "UI rendering", "Kotlin Android Fragment"], "state": 2, "file_id": 17, "knowledge_revision": 229, "git_revision": "6e91d21a038bee6a12947e6117ed8dfb31963ce7", "revision_history": [{"52": ""}, {"93": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"111": "ec68bc5172b79f3c72327ea0ad8090ce19371643"}, {"127": "ec68bc5172b79f3c72327ea0ad8090ce19371643"}, {"142": "234954649911681eb37326c98e5a3c4636728440"}, {"181": "234954649911681eb37326c98e5a3c4636728440"}, {"229": "6e91d21a038bee6a12947e6117ed8dfb31963ce7"}], "hash": "db259a4dfd506c71c0a2debdf0da51ad", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/ui/home/HomeFragment.kt"}