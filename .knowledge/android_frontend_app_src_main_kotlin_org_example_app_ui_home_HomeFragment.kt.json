{"is_source_file": true, "format": "Kotlin", "description": "This file defines the HomeFragment class for an Android app, responsible for displaying a list of restaurants with filtering, sorting, and UI interaction logic.", "external_files": ["R.layout.fragment_home", "R.layout.item_category_chip", "R.menu.home_overflow_menu", "androidx.fragment.app.Fragment", "com.google.android.material.*", "org.example.app.R", "org.example.app.data.favorites.FavoritesRepository", "org.example.app.data.mock.MockData", "org.example.app.data.models.Restaurant", "org.example.app.data.preferences.AppPreferencesRepository", "org.example.app.ui.shared.SharedAppViewModel", "androidx.lifecycle.ViewModelProvider", "androidx.recyclerview.widget.LinearLayoutManager", "androidx.recyclerview.widget.RecyclerView"], "external_methods": ["FavoritesRepository.isRestaurantFavorited", "FavoritesRepository.toggleRestaurantFavorite", "AppPreferencesRepository.setHomeFavoritesOnly", "AppPreferencesRepository.setHomeSearchQuery", "AppPreferencesRepository.setHomeVegOnly", "AppPreferencesRepository.setHomeSelectedCuisines", "AppPreferencesRepository.setHomeSortOption", "AppPreferencesRepository.setThemeMode", "sharedAppViewModel.homeFavoritesOnly.value", "sharedAppViewModel.favoriteRestaurantIds.value", "sharedAppViewModel.homeSearchQuery.value", "sharedAppViewModel.homeVegOnly.value", "sharedAppViewModel.homeSelectedCuisines.value", "sharedAppViewModel.homeSortOption.value", "sharedAppViewModel.themeMode.value", "adapter.submitList", "adapter.notifyDataSetChanged", "showThemeDialog", "showSortDialog"], "published": ["HomeFragment"], "classes": [{"name": "HomeFragment", "description": "A fragment class implementing a list of restaurants with filtering and sorting capabilities, integrating with ViewModel and preferences."}], "methods": [{"name": "onAttach", "description": "Initializes the RestaurantAdapter with click and favorite toggle handlers."}, {"name": "onCreate", "description": "Sets up the shared ViewModel and enables options menu."}, {"name": "onCreateOptionsMenu", "description": "Inflates the overflow menu."}, {"name": "onOptionsItemSelected", "description": "Handles menu item selection, e.g., theme dialog."}, {"name": "onCreateView", "description": "Inflates the fragment layout."}, {"name": "onViewCreated", "description": "Initializes UI components, sets up observers, and restores preferences; triggers initial rendering."}, {"name": "setupSearch", "description": "Adds text watcher to search input to update preferences."}, {"name": "setupFilterChips", "description": "Creates filter chips for vegetarian, vegan, and cuisine tags, setting their change listeners."}, {"name": "setupSort", "description": "Sets click listener for sort button to show sorting options."}, {"name": "showSortDialog", "description": "Displays a dialog for sorting options."}, {"name": "showThemeDialog", "description": "Displays a theme selection dialog."}, {"name": "getSortLabel", "description": "Returns string label for a given sorting option."}, {"name": "restoreUiFromPreferences", "description": "Restores search text and chip states from preferences."}, {"name": "applySearchAndFilters", "description": "Filters the list of restaurants based on search query, veg-only, and selected cuisines."}, {"name": "applySort", "description": "Sorts the list of restaurants based on selected sort criteria."}], "calls": ["FavoritesRepository.isRestaurantFavorited", "FavoritesRepository.toggleRestaurantFavorite", "AppPreferencesRepository.setHomeFavoritesOnly", "AppPreferencesRepository.setHomeSearchQuery", "AppPreferencesRepository.setHomeVegOnly", "AppPreferencesRepository.setHomeSelectedCuisines", "AppPreferencesRepository.setHomeSortOption", "AppPreferencesRepository.setThemeMode", "sharedAppViewModel.favoriteRestaurantIds.observe", "sharedAppViewModel.homeFavoritesOnly.observe", "sharedAppViewModel.homeSearchQuery.observe", "sharedAppViewModel.homeVegOnly.observe", "sharedAppViewModel.homeSelectedCuisines.observe", "sharedAppViewModel.homeSortOption.observe", "adapter.submitList", "adapter.notifyDataSetChanged", "showThemeDialog", "showSortDialog"], "search-terms": ["Android Fragment", "Kotlin UI", "Restaurant filtering", "Sort options", "Shared ViewModel", "User preferences", "Chips UI", "Favorites", "Search filter", "Sorting dialog"], "state": 2, "file_id": 17, "knowledge_revision": 127, "git_revision": "ec68bc5172b79f3c72327ea0ad8090ce19371643", "revision_history": [{"52": ""}, {"93": "ac812a530cde5aab51ee830d20669449da61e0a3"}, {"111": "ec68bc5172b79f3c72327ea0ad8090ce19371643"}, {"127": "ec68bc5172b79f3c72327ea0ad8090ce19371643"}], "hash": "0ee726af0b861bc01ead525283c93f67", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/ui/home/HomeFragment.kt"}